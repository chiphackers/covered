\section{util.c File Reference}
\label{util_8c}\index{util.c@{util.c}}
{\tt \#include $<$stdlib.h$>$}\par
{\tt \#include $<$stdio.h$>$}\par
{\tt \#include $<$sys/types.h$>$}\par
{\tt \#include $<$sys/stat.h$>$}\par
{\tt \#include $<$unistd.h$>$}\par
{\tt \#include $<$assert.h$>$}\par
{\tt \#include $<$dirent.h$>$}\par
{\tt \#include \char`\"{}defines.h\char`\"{}}\par
{\tt \#include \char`\"{}util.h\char`\"{}}\par
{\tt \#include \char`\"{}link.h\char`\"{}}\par
\subsection*{Functions}
\begin{CompactItemize}
\item 
void {\bf set\_\-output\_\-suppression} ({\bf bool} value)
\begin{CompactList}\small\item\em Sets error suppression to specified value.\item\end{CompactList}\item 
void {\bf set\_\-debug} ({\bf bool} value)
\item 
void {\bf print\_\-output} (char $\ast$msg, int type)
\begin{CompactList}\small\item\em Displays error message to standard output.\item\end{CompactList}\item 
{\bf bool} {\bf is\_\-variable} (char $\ast$token)
\begin{CompactList}\small\item\em Returns TRUE if the specified string is a legal variable name.\item\end{CompactList}\item 
{\bf bool} {\bf is\_\-directory} (char $\ast$token)
\begin{CompactList}\small\item\em Returns TRUE if the specified string is a legal directory string.\item\end{CompactList}\item 
{\bf bool} {\bf directory\_\-exists} (char $\ast$dir)
\begin{CompactList}\small\item\em Returns TRUE if the specified directory exists.\item\end{CompactList}\item 
void {\bf directory\_\-load} (char $\ast$dir, {\bf str\_\-link} $\ast$ext\_\-head, {\bf str\_\-link} $\ast$$\ast$file\_\-head, {\bf str\_\-link} $\ast$$\ast$file\_\-tail)
\begin{CompactList}\small\item\em Loads contents of specified directory to file list if extension is part of list.\item\end{CompactList}\item 
{\bf bool} {\bf file\_\-exists} (char $\ast${\bf file})
\begin{CompactList}\small\item\em Returns TRUE if the specified file exists.\item\end{CompactList}\item 
{\bf bool} {\bf readline} (FILE $\ast${\bf file}, char $\ast$$\ast$line)
\begin{CompactList}\small\item\em Reads line from file and returns it in string form.\item\end{CompactList}\item 
void {\bf scope\_\-extract\_\-front} (char $\ast$scope, char $\ast$front, char $\ast$rest)
\begin{CompactList}\small\item\em Extracts highest level of hierarchy from specified scope.\item\end{CompactList}\item 
void {\bf scope\_\-extract\_\-back} (char $\ast$scope, char $\ast$back, char $\ast$rest)
\begin{CompactList}\small\item\em Extracts lowest level of hierarchy from specified scope.\item\end{CompactList}\item 
{\bf bool} {\bf scope\_\-local} (char $\ast$scope)
\begin{CompactList}\small\item\em Returns TRUE if specified scope is local (contains no periods).\item\end{CompactList}\item 
void $\ast$ {\bf malloc\_\-safe} (int {\bf size})
\begin{CompactList}\small\item\em Performs safe malloc call.\item\end{CompactList}\item 
void {\bf free\_\-safe} (void $\ast$ptr)
\begin{CompactList}\small\item\em Performs safe deallocation of heap memory.\item\end{CompactList}\item 
void {\bf gen\_\-space} (char $\ast$spaces, int num\_\-spaces)
\begin{CompactList}\small\item\em Creates a string containing space characters.\item\end{CompactList}\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
{\bf bool} {\bf output\_\-suppressed}
\item 
{\bf bool} {\bf debug\_\-mode}
\item 
unsigned long {\bf curr\_\-malloc\_\-size} = 0
\item 
unsigned long {\bf largest\_\-malloc\_\-size} = 0
\item 
char {\bf user\_\-msg} [USER\_\-MSG\_\-LENGTH]
\end{CompactItemize}


\subsection{Detailed Description}


\begin{Desc}
\item[Author: ]\par
Trevor Williams ({\tt trevorw@charter.net}) \end{Desc}
\begin{Desc}
\item[Date: ]\par
11/27/2001\end{Desc}


\subsection{Function Documentation}
\index{util.c@{util.c}!directory_exists@{directory\_\-exists}}
\index{directory_exists@{directory\_\-exists}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} directory\_\-exists (char $\ast$ {\em dir})}\label{util_8c_a10}


Returns TRUE if the specified directory exists.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
dir}]Name of directory to check for existence. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns: ]\par
Returns TRUE if the specified directory exists; otherwise, returns FALSE.\end{Desc}
Checks to see if the specified directory actually exists in the file structure. If the directory is found to exist, returns TRUE; otherwise, returns FALSE. \index{util.c@{util.c}!directory_load@{directory\_\-load}}
\index{directory_load@{directory\_\-load}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void directory\_\-load (char $\ast$ {\em dir}, {\bf str\_\-link} $\ast$ {\em ext\_\-head}, {\bf str\_\-link} $\ast$$\ast$ {\em file\_\-head}, {\bf str\_\-link} $\ast$$\ast$ {\em file\_\-tail})}\label{util_8c_a11}


Loads contents of specified directory to file list if extension is part of list.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
dir}]Name of directory to read files from. \item[{\em 
ext\_\-head}]Pointer to extension list. \item[{\em 
file\_\-head}]Pointer to head element of filename string list. \item[{\em 
file\_\-tail}]Pointer to tail element of filename string list.\end{description}
\end{Desc}


\begin{Desc}
\item[{\bf Bug: }]\par
Need to order files according to extension first instead of filename.\end{Desc}


Opens the specified directory for reading and loads (in order) all files that contain the specified extensions (if ext\_\-head is NULL, load only $\ast$.v files). Stores all string filenames to the specified string list. \index{util.c@{util.c}!file_exists@{file\_\-exists}}
\index{file_exists@{file\_\-exists}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} file\_\-exists (char $\ast$ {\em file})}\label{util_8c_a12}


Returns TRUE if the specified file exists.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
file}]Name of file to check for existence. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns: ]\par
Returns TRUE if the specified file exists; otherwise, returns FALSE.\end{Desc}
Checks to see if the specified file actually exists in the file structure. If the file is found to exist, returns TRUE; otherwise, returns FALSE. \index{util.c@{util.c}!free_safe@{free\_\-safe}}
\index{free_safe@{free\_\-safe}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void free\_\-safe (void $\ast$ {\em ptr})}\label{util_8c_a18}


Performs safe deallocation of heap memory.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
ptr}]Pointer to object to deallocate.\end{description}
\end{Desc}
Safely performs a free function of heap memory. Also keeps track of current memory usage for output information at end of program life. \index{util.c@{util.c}!gen_space@{gen\_\-space}}
\index{gen_space@{gen\_\-space}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void gen\_\-space (char $\ast$ {\em spaces}, int {\em num\_\-spaces})}\label{util_8c_a19}


Creates a string containing space characters.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
spaces}]Pointer to string to places spaces into. \item[{\em 
num\_\-spaces}]Number of spaces to place in string.\end{description}
\end{Desc}
Creates a string that contains num\_\-spaces number of space characters, adding a NULL character at the end of the string to allow for correct usage by the strlen and other string functions. \index{util.c@{util.c}!is_directory@{is\_\-directory}}
\index{is_directory@{is\_\-directory}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} is\_\-directory (char $\ast$ {\em token})}\label{util_8c_a9}


Returns TRUE if the specified string is a legal directory string.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
token}]String to check for valid pathname-ness \end{description}
\end{Desc}
\begin{Desc}
\item[Returns: ]\par
Returns TRUE if the specified string is a legal UNIX directory; otherwise, returns FALSE.\end{Desc}
Returns TRUE if the specified string is either a legal UNIX relative pathname or static pathname. If the specified string does not correlate to a legal UNIX pathname, a value of FALSE is returned. \index{util.c@{util.c}!is_variable@{is\_\-variable}}
\index{is_variable@{is\_\-variable}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} is\_\-variable (char $\ast$ {\em token})}\label{util_8c_a8}


Returns TRUE if the specified string is a legal variable name.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
token}]String to check for valid variable name. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns: ]\par
Returns TRUE if the specified string is a legal variable name; otherwise, returns FALSE.\end{Desc}
If the specified string follows all of the rules for a legal program variable (doesn't start with a number, contains only a-z\-A-Z0-9\_\- characters), returns a value of TRUE; otherwise, returns a value of FALSE. \index{util.c@{util.c}!malloc_safe@{malloc\_\-safe}}
\index{malloc_safe@{malloc\_\-safe}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ malloc\_\-safe (int {\em size})}\label{util_8c_a17}


Performs safe malloc call.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
size}]Number of bytes to allocate.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns: ]\par
Pointer to allocated memory.\end{Desc}
Allocated memory like a malloc() call but performs some pre-allocation and post-allocation checks to be sure that the malloc call works properly. \index{util.c@{util.c}!print_output@{print\_\-output}}
\index{print_output@{print\_\-output}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void print\_\-output (char $\ast$ {\em msg}, int {\em type})}\label{util_8c_a7}


Displays error message to standard output.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
msg}]Message to display. \item[{\em 
type}]Type of message to output\end{description}
\end{Desc}
Displays the specified message to standard output based on the type of message being output. \index{util.c@{util.c}!readline@{readline}}
\index{readline@{readline}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} readline (FILE $\ast$ {\em file}, char $\ast$$\ast$ {\em line})}\label{util_8c_a13}


Reads line from file and returns it in string form.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
file}]File to read next line from. \item[{\em 
line}]Pointer to string which will contain read line minus newline character.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns: ]\par
Returns FALSE if feof is encountered; otherwise, returns TRUE.\end{Desc}
Reads in a single line of information from the specified file and returns a string containing the read line to the calling function. \index{util.c@{util.c}!scope_extract_back@{scope\_\-extract\_\-back}}
\index{scope_extract_back@{scope\_\-extract\_\-back}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void scope\_\-extract\_\-back (char $\ast$ {\em scope}, char $\ast$ {\em back}, char $\ast$ {\em rest})}\label{util_8c_a15}


Extracts lowest level of hierarchy from specified scope.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
scope}]Full scope to extract from. \item[{\em 
back}]Lowest level of hierarchy extracted. \item[{\em 
rest}]Hierarchy left after extraction.\end{description}
\end{Desc}
Extracts the lowest level of hierarchy from the specified scope, returning that instance name to the value of back and the the rest of the hierarchy in the value of rest. \index{util.c@{util.c}!scope_extract_front@{scope\_\-extract\_\-front}}
\index{scope_extract_front@{scope\_\-extract\_\-front}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void scope\_\-extract\_\-front (char $\ast$ {\em scope}, char $\ast$ {\em front}, char $\ast$ {\em rest})}\label{util_8c_a14}


Extracts highest level of hierarchy from specified scope.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
scope}]Full scope to extract from. \item[{\em 
front}]Highest level of hierarchy extracted. \item[{\em 
rest}]Hierarchy left after extraction.\end{description}
\end{Desc}
Extracts the highest level of hierarchy from the specified scope, returning that instance name to the value of front and the the rest of the hierarchy in the value of rest. \index{util.c@{util.c}!scope_local@{scope\_\-local}}
\index{scope_local@{scope\_\-local}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} scope\_\-local (char $\ast$ {\em scope})}\label{util_8c_a16}


Returns TRUE if specified scope is local (contains no periods).

\index{util.c@{util.c}!set_debug@{set\_\-debug}}
\index{set_debug@{set\_\-debug}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void set\_\-debug ({\bf bool} {\em value})}\label{util_8c_a6}


\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
value}]Boolean value of debug mode.\end{description}
\end{Desc}
Sets the global debug mode to the specified value. \index{util.c@{util.c}!set_output_suppression@{set\_\-output\_\-suppression}}
\index{set_output_suppression@{set\_\-output\_\-suppression}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void set\_\-output\_\-suppression ({\bf bool} {\em value})}\label{util_8c_a5}


Sets error suppression to specified value.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
value}]Boolean value of suppression.\end{description}
\end{Desc}
Sets the global variable output\_\-suppressed to the specified value. 

\subsection{Variable Documentation}
\index{util.c@{util.c}!curr_malloc_size@{curr\_\-malloc\_\-size}}
\index{curr_malloc_size@{curr\_\-malloc\_\-size}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}unsigned long curr\_\-malloc\_\-size = 0}\label{util_8c_a2}


Contains the total number of bytes malloc'ed during the simulation run. This information is output to the user after simulation as a performance indicator. \index{util.c@{util.c}!debug_mode@{debug\_\-mode}}
\index{debug_mode@{debug\_\-mode}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} debug\_\-mode}\label{util_8c_a1}


If set to TRUE, causes debug information to be spewed to screen. \index{util.c@{util.c}!largest_malloc_size@{largest\_\-malloc\_\-size}}
\index{largest_malloc_size@{largest\_\-malloc\_\-size}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}unsigned long largest\_\-malloc\_\-size = 0}\label{util_8c_a3}


Holds the largest number of bytes in allocation at one period of time. \index{util.c@{util.c}!output_suppressed@{output\_\-suppressed}}
\index{output_suppressed@{output\_\-suppressed}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} output\_\-suppressed}\label{util_8c_a0}


If set to TRUE, suppresses all non-fatal error messages from being displayed. \index{util.c@{util.c}!user_msg@{user\_\-msg}}
\index{user_msg@{user\_\-msg}!util.c@{util.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char user\_\-msg[USER\_\-MSG\_\-LENGTH]}\label{util_8c_a4}


Holds some output that will be displayed via the print\_\-output command. This is created globally so that memory does not need to be reallocated for each function that wishes to use it. 